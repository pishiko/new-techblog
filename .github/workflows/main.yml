name: Deploy pages

on:
  repository_dispatch:
    types: [update_content]

jobs:
  build:
    runs-on: ubuntu-latest
  
    steps:
      - uses: actions/checkout@v3    
      - name: Setup Python
        uses: actions/setup-python@v3.1.3
        with:
          python-version: 3.11.1
      - run: |
          python -m pip install --upgrade pip pipenv
      
      - name: Build
      - run: cd ./ssg
      - run: pipenv run python ./html.py
      
      - name: Push docs
        run: |
          git config --global user.name "pishiko"
          git config --global user.email "pishiko@users.noreply.github.com"
          if (git diff --shortstat | grep '[0-9]'); then \
            git add docs; \
            git commit -m "github action push"; \
            git push; \
          fi
      
